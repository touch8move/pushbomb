{
  "_args": [
    [
      {
        "raw": "fcm-node",
        "scope": null,
        "escapedName": "fcm-node",
        "name": "fcm-node",
        "rawSpec": "",
        "spec": "latest",
        "type": "tag"
      },
      "/Users/kimdongho/node/pushbomb"
    ]
  ],
  "_from": "fcm-node@latest",
  "_id": "fcm-node@1.2.0",
  "_inCache": true,
  "_location": "/fcm-node",
  "_nodeVersion": "4.5.0",
  "_npmOperationalInternal": {
    "host": "packages-12-west.internal.npmjs.com",
    "tmp": "tmp/fcm-node-1.2.0.tgz_1491179676526_0.890950245084241"
  },
  "_npmUser": {
    "name": "jlcvp",
    "email": "jlcvp@cin.ufpe.br"
  },
  "_npmVersion": "2.15.9",
  "_phantomChildren": {},
  "_requested": {
    "raw": "fcm-node",
    "scope": null,
    "escapedName": "fcm-node",
    "name": "fcm-node",
    "rawSpec": "",
    "spec": "latest",
    "type": "tag"
  },
  "_requiredBy": [
    "#USER",
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/fcm-node/-/fcm-node-1.2.0.tgz",
  "_shasum": "56063f6ca5fa9192338ea2a71cb22704c6f30adc",
  "_shrinkwrap": null,
  "_spec": "fcm-node",
  "_where": "/Users/kimdongho/node/pushbomb",
  "author": {
    "name": "Leonardo Pereira",
    "email": "jlcvp@cin.ufpe.br"
  },
  "bugs": {
    "url": "https://github.com/jlcvp/fcm-node/issues"
  },
  "dependencies": {
    "firebase-admin": "^4.1.3",
    "mocha": "^3.2.0",
    "retry": "^0.9.0"
  },
  "description": "A Node.JS simple interface to Google's Firebase Cloud Messaging (FCM). Supports both android and iOS, including topic messages, and parallel calls.\nAditionally it also keeps the callback behavior for the new firebase messaging service.",
  "devDependencies": {},
  "directories": {
    "test": "test"
  },
  "dist": {
    "shasum": "56063f6ca5fa9192338ea2a71cb22704c6f30adc",
    "tarball": "https://registry.npmjs.org/fcm-node/-/fcm-node-1.2.0.tgz"
  },
  "gitHead": "6076cca5e99b03e2ee5c0226ee09dc4fc1ce21fd",
  "homepage": "https://github.com/jlcvp/fcm-node",
  "keywords": [
    "fcm",
    "gcm",
    "push",
    "notification",
    "push notification",
    "firebase",
    "firebase cloud messaging",
    "google",
    "android",
    "ios",
    "topic message",
    "parallel send"
  ],
  "license": "MIT",
  "main": "index.js",
  "maintainers": [
    {
      "name": "jlcvp",
      "email": "jlcvp@cin.ufpe.br"
    }
  ],
  "name": "fcm-node",
  "optionalDependencies": {},
  "readme": "### Warning: on February 2, 2017, the Firebase Team [released][11] the [_admin.messaging()_][12] service to their node.js admin module. This new service makes this module kind of *deprecated*  \n\nfcm-node [![NPM version](https://badge.fury.io/js/fcm-node.svg)](http://badge.fury.io/js/fcm-node)\n========\nA Node.JS simple interface to Google's Firebase Cloud Messaging (FCM). Supports both android and iOS, including topic messages, and parallel calls.  \nAditionally it also keeps the callback behavior for the new firebase messaging service. \n## Installation\n\nVia [npm][1]:\n\n    $ npm install fcm-node\n\n## Usage\n\nThere are 2 ways to use this lib:\n### The **classic** one \n   1. Generate a **Server Key** on your app's firebase console and pass it to the **FCM** constructor\n   2. Create a _message object_ and call the **send()** function\n#### Classic usage example:\n```js\n    var FCM = require('fcm-node');\n    var serverKey = 'YOURSERVERKEYHERE'; //put your server key here\n    var fcm = new FCM(serverKey);\n\n    var message = { //this may vary according to the message type (single recipient, multicast, topic, et cetera)\n        to: 'registration_token', \n        collapse_key: 'your_collapse_key',\n        \n        notification: {\n            title: 'Title of your push notification', \n            body: 'Body of your push notification' \n        },\n        \n        data: {  //you can send only notification or only data(or include both)\n            my_key: 'my value',\n            my_another_key: 'my another value'\n        }\n    };\n    \n    fcm.send(message, function(err, response){\n        if (err) {\n            console.log(\"Something has gone wrong!\");\n        } else {\n            console.log(\"Successfully sent with response: \", response);\n        }\n    });\n```\n\n### The **new** one \n   1. Go to your [Service account tab][13] in your project's settings and download/generate your app's private key. \n   2. Add this file in your project's workspace\n   3. Import that file with a `require('path/to/privatekey.json')` style call and pass the object to the **FCM** constructor\n   4. Create a _message object_ and call the **send()** function\n   \n#### \"New\" usage example\n```js\n    var FCM = require('fcm-node')\n    \n    var serverKey = require('path/to/privatekey.json') //put the generated private key path here    \n    \n    var fcm = new FCM(serverKey)\n\n    var message = { //this may vary according to the message type (single recipient, multicast, topic, et cetera)\n        to: 'registration_token', \n        collapse_key: 'your_collapse_key',\n        \n        notification: {\n            title: 'Title of your push notification', \n            body: 'Body of your push notification' \n        },\n        \n        data: {  //you can send only notification or only data(or include both)\n            my_key: 'my value',\n            my_another_key: 'my another value'\n        }\n    }\n    \n    fcm.send(message, function(err, response){\n        if (err) {\n            console.log(\"Something has gone wrong!\")\n        } else {\n            console.log(\"Successfully sent with response: \", response)\n        }\n    })\n```\n\n## Topic subscription on web clients\n\nWeb clients doesn't have a \"native\" way to subscribe/unsubscribe from topics other than manually requesting, managing and registering with the google's iid servers. To resolve this \"barrier\" your server can easily handle the web client's sub/unsub requests with this lib.\n\nFor more detailed information, please take a look at [Google InstanceID Reference][14].\n\n*PS: For mobile clients you can still use the native calls to subscribe/unsubscribe with one-liner calls*\n##### Android\n```java\nFirebaseMessaging.getInstance().subscribeToTopic(\"news\");\n```\n##### iOS\n```objective-c\n[[FIRMessaging messaging] subscribeToTopic:@\"/topics/news\"];\n```\n\n\n\n### Subscribe Device Tokens to Topics\n\n```js\nvar FCM = require('fcm-node');\nvar serverKey = 'YOURSERVERKEYHERE'; //put your server key here\nvar fcm = new FCM(serverKey);\n\nfcm.subscribeToTopic([ 'device_token_1', 'device_token_2' ], 'some_topic_name', (err, res) => {\n    assert.ifError(err);\n    assert.ok(res);\n    done();\n});\n```\n\n### Unsubscribe Device Tokens to Topics\n\n```js\nvar FCM = require('fcm-node');\nvar serverKey = 'YOURSERVERKEYHERE'; //put your server key here\nvar fcm = new FCM(serverKey);\n\nfcm.unsubscribeToTopic([ 'device_token_1', 'device_token_2' ], 'some_topic_name', (err, res) => {\n    assert.ifError(err);\n    assert.ok(res);\n    done();\n});\n\n```\n\n## Notes\n* See [FCM documentation][2] for general details.\n* See [Firebase Cloud Messaging HTTP Protocol][10] for details about the HTTP syntax used and JSON fields, notification and data objects. **(STRONGLY RECOMMENDED)**\n* On **iOS**, set **content_available** to **true** to receive data while your app is in background. (As seen in [FCM Docs][8])  \n\n## Credits\n\nExtended by [Leonardo Pereira (me)][3].\nBased on the great work on [fcm-push][7] by [Rasmunandar Rustam][4] cloned and modified from there, which in its turn, was cloned and modified from [Changshin Lee][5]'s [node-gcm][5]\n\n## License\n\n[MIT][6]\n\n[1]: http://github.com/isaacs/npm\n[2]: https://firebase.google.com/docs/cloud-messaging/server\n[3]: https://github.com/jlcvp\n[4]: mailto:nandar.rustam@gmail.com\n[5]: https://github.com/h2soft/node-gcm\n[6]: https://opensource.org/licenses/MIT\n[7]: https://github.com/nandarustam/fcm-push\n[8]: https://firebase.google.com/docs/cloud-messaging/concept-options\n[9]: https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/APNsProviderAPI.html#//apple_ref/doc/uid/TP40008194-CH101-SW2\n[10]: https://firebase.google.com/docs/cloud-messaging/http-server-ref\n[11]: https://firebase.google.com/support/release-notes/admin/node\n[12]: https://firebase.google.com/docs/reference/admin/node/admin.messaging\n[13]: https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk\n[14]: https://developers.google.com/instance-id/reference/server#create_relationship_maps_for_app_instances\n[15]: https://github.com/sofiapm\n## Changelog\n1.2.0 - Added topic subscriptions management for web clients - *Thanks to [@sofiapm][15] for this feature*   \n1.1.0 - Support for the new firebase node.js sdk methods  \n1.0.14 - Added example file to quick tests <br />\n1.0.13 - Added a error response in case of TopicsMessageRateExceeded response <br />\n1.0.12 - Refactored the client removing the Event Emitter's Logic to fix concurrency issues. Using pure callbacks now also avoids memory leak in specific scenarios with lots of parallel calls to <b>send</b> function. <br />\n1.0.11 - \\<FIX\\> send function returning error objects when multicast messages (or individually targeted) returned both error and success keys on response message (even with error counter = 0 ) <br /> \n1.0.9 - Updated Documentation <br />\n1.0.8 - \\<FIX\\> 'icon' field no longer required in notification<br /> \n1.0.7 - renaming repository<br />\n1.0.6 - bugfix: send function was always returning an error object for multicast messages (multiple registration ids)<br />\n1.0.5 - bugfix with UTF-8 enconding and chunk-encoded transfers<br />\n1.0.1 - forked from fcm-push and extended to accept topic messages without errors<br />\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/jlcvp/fcm-node.git"
  },
  "scripts": {
    "debugtest": "mocha --debug-brk $npm_package_options_mocha",
    "test": "mocha"
  },
  "tonicExampleFilename": "example.js",
  "version": "1.2.0"
}
